<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Zoom and Drag</title>
    <style>
        #canvas {
            border: 1px solid #ccc;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script>
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');

        var originalWidth = 2040;
        var originalHeight = 1530;
        var scale = 1;
        var translateX = 0;
        var translateY = 0;
        var isDragging = false;
        var startX, startY;

        canvas.width = 300;
        canvas.height = 300;

        var img = new Image();
        img.src = '../img/a.jpg';
        img.onload = function () {
            scale = Math.max(canvas.width / originalWidth, canvas.height / originalHeight);
            translateX = (canvas.width - originalWidth * scale) / 2;
            translateY = (canvas.height - originalHeight * scale) / 2;
            redrawImage();
        };

        function redrawImage() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(img, translateX, translateY, originalWidth * scale, originalHeight * scale);
        }

        function updateZoom(newScale) {
            var mouseX = (canvas.width / 2 - translateX) / scale;
            var mouseY = (canvas.height / 2 - translateY) / scale;

            scale = newScale;
            translateX = canvas.width / 2 - mouseX * scale;
            translateY = canvas.height / 2 - mouseY * scale;

            redrawImage();
        }

        canvas.addEventListener('mousedown', function (e) {
            isDragging = true;
            startX = e.clientX;
            startY = e.clientY;
        });

        canvas.addEventListener('mousemove', function (e) {
            if (isDragging) {
                var deltaX = e.clientX - startX;
                var deltaY = e.clientY - startY;
                translateX += deltaX;
                translateY += deltaY;
                redrawImage();
                startX = e.clientX;
                startY = e.clientY;
            }
        });

        canvas.addEventListener('mouseup', function () {
            isDragging = false;
        });

        canvas.addEventListener('wheel', function (e) {
            var scaleFactor = e.deltaY > 0 ? 0.9 : 1.1;
            updateZoom(scale * scaleFactor);
        });
    </script>
</body>

</html>